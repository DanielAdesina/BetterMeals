{"ast":null,"code":"import _classCallCheck from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import config from\"../../config.json\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MealSnippet=/*#__PURE__*/function(_Component){_inherits(MealSnippet,_Component);var _super=_createSuper(MealSnippet);function MealSnippet(props){var _this;_classCallCheck(this,MealSnippet);_this=_super.call(this,props);_this.loadContents=function(){var id=_this.props.id;var meal={};var summary=\"\";var storageCheck=JSON.parse(localStorage.getItem(id));var options={method:'GET',url:'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/'+id+'/information',headers:{'X-RapidAPI-Host':'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com','X-RapidAPI-Key':config[\"api-key\"]}};if(storageCheck&&Date.now()<storageCheck.ttl){meal=storageCheck;summary=storageCheck.summary;_this.setState({meal:storageCheck,summary:storageCheck.summary});}else{axios.request(options).then(function(res){res.data.ttl=Date.now()+86400*1000;localStorage.setItem(id,JSON.stringify(res.data));meal=res.data;summary=res.data.summary;_this.setState({meal:res.data,summary:res.data.summary});}).catch(function(err){console.error(err);});}return[meal,summary];};_this.state={meal:{},summary:\"\"};return _this;}_createClass(MealSnippet,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadContents();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.id!==prevProps.id){this.loadContents();}}},{key:\"render\",value:function render(){var id=this.props.id;var meal=this.state.meal;var summary=this.state.summary;var pFontSize=15;var mealLink=/*#__PURE__*/_jsx(Link,{to:\"/meal/\"+this.props.id,class:\"btn\",style:{borderRadius:\"0px\",backgroundColor:\"lightblue\",width:\"100%\",color:\"black\",fontWeight:\"bold\"},children:\"View More\"});if(this.props.id===\"\"){pFontSize=20;mealLink=/*#__PURE__*/_jsx(_Fragment,{});}if(id===\"\"){summary=\"No Meal Selected\";}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Meal\",style:{width:\"278px\",height:\"185px\"},src:\"https://spoonacular.com/recipeImages/\"+meal.id+\"-556x370.jpg\",align:\"left\",class:\"col-md-8 float mb-3 mt-3 me-5 ms-md-3\"}),/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:\"1vh\"},children:meal.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"2vw\",fontSize:pFontSize+\"px\"},dangerouslySetInnerHTML:{__html:summary}}),mealLink]});}}]);return MealSnippet;}(Component);export default MealSnippet;","map":{"version":3,"sources":["C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/src/components/App/MealSnippet.js"],"names":["React","Component","axios","config","Link","MealSnippet","props","loadContents","id","meal","summary","storageCheck","JSON","parse","localStorage","getItem","options","method","url","headers","Date","now","ttl","setState","request","then","res","data","setItem","stringify","catch","err","console","error","state","prevProps","pFontSize","mealLink","borderRadius","backgroundColor","width","color","fontWeight","height","marginTop","title","margin","fontSize","__html"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport config from \"../../config.json\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass MealSnippet extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            meal: {},\r\n            summary: \"\"\r\n        }\r\n    }\r\n\r\n    loadContents = () => {\r\n        const id = this.props.id\r\n\r\n        let meal = {}\r\n        let summary = \"\"\r\n\r\n        const storageCheck = JSON.parse(localStorage.getItem(id));\r\n        const options = {\r\n            method: 'GET',\r\n            url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/' + id + '/information',\r\n            headers: {\r\n            'X-RapidAPI-Host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\r\n            'X-RapidAPI-Key': config[\"api-key\"]\r\n            }\r\n        };\r\n        if(storageCheck && (Date.now() < storageCheck.ttl)){\r\n            \r\n            meal = storageCheck\r\n            summary = storageCheck.summary\r\n            this.setState({meal: storageCheck, summary: storageCheck.summary})\r\n            \r\n        }\r\n        else{\r\n            axios.request(options).then(res => {\r\n                res.data.ttl = Date.now() + (86400 * 1000);\r\n                localStorage.setItem(id, JSON.stringify(res.data));\r\n                meal = res.data\r\n                summary = res.data.summary\r\n                this.setState({meal: res.data, summary: res.data.summary})\r\n                        \r\n            }).catch(err => {\r\n                console.error(err)\r\n            })\r\n        }\r\n        return [meal, summary]\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        this.loadContents()\r\n        \r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if (this.props.id !== prevProps.id) {\r\n\r\n            this.loadContents()\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        const id = this.props.id\r\n        let meal = this.state.meal\r\n        let summary = this.state.summary\r\n\r\n        let pFontSize = 15\r\n        let mealLink = <Link to={\"/meal/\" + this.props.id} class=\"btn\"\r\n        style={{borderRadius: \"0px\", backgroundColor: \"lightblue\", width: \"100%\", color: \"black\", fontWeight: \"bold\"}}>View More</Link>\r\n\r\n        if(this.props.id === \"\"){\r\n            pFontSize = 20;\r\n            mealLink = <></>\r\n        }\r\n\r\n        if(id === \"\"){\r\n        \r\n        \r\n            summary = \"No Meal Selected\"\r\n            \r\n        }\r\n\r\n        return(\r\n            <>\r\n                <img alt=\"Meal\" style={{width: \"278px\", height: \"185px\"}} src={\"https://spoonacular.com/recipeImages/\" + meal.id + \"-556x370.jpg\"} \r\n                align=\"left\" class=\"col-md-8 float mb-3 mt-3 me-5 ms-md-3\"></img>\r\n                <h2 style={{marginTop: \"1vh\"}}>{meal.title}</h2>\r\n                <p style={{margin: \"2vw\", fontSize: pFontSize + \"px\"}} dangerouslySetInnerHTML={{__html: summary}}></p>\r\n                {mealLink}\r\n            </>\r\n        )\r\n        \r\n\r\n        \r\n       \r\n    }\r\n}\r\n\r\nexport default MealSnippet;"]},"metadata":{},"sourceType":"module"}