{"ast":null,"code":"import _classCallCheck from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"bootstrap/dist/css/bootstrap.min.css\";import axios from\"axios\";import emptysign from\"../MealPlan/emptyplate.webp\";import MealsModal from\"./MealsModal\";import config from\"../../config.json\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Meal=/*#__PURE__*/function(_Component){_inherits(Meal,_Component);var _super=_createSuper(Meal);function Meal(props){var _this;_classCallCheck(this,Meal);_this=_super.call(this,props);_this.showModalClick=function(){_this.setState({showModal:true});};_this.state={showModal:false,meal:{title:\"\"}};return _this;}_createClass(Meal,[{key:\"getInfo\",value:function getInfo(){var _this2=this;if(this.props.id!==\"\"){var storageCheck=JSON.parse(localStorage.getItem(this.props.id));var options={method:'GET',url:'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/'+this.props.id+'/information',headers:{'X-RapidAPI-Host':'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com','X-RapidAPI-Key':config[\"api-key\"]}};if(storageCheck&&Date.now()<storageCheck.ttl){this.setState({meal:storageCheck});}else{axios.request(options).then(function(res){res.data.ttl=Date.now()+86400*1000;localStorage.setItem(_this2.props.id,JSON.stringify(res.data));_this2.setState({meal:res.data});}).catch(function(err){console.error(err);});}}}},{key:\"render\",value:function render(){var _this3=this;var imageUrl=emptysign;var viewMeal=/*#__PURE__*/_jsx(\"a\",{href:\"#\",style:{color:\"rgb(41, 198, 254)\"},children:\" View Meal\"});var mealTitle=\"No Meal\";var _changeMealFunc=function changeMealFunc(newMeal){};if(this.props.id!==\"\"){imageUrl=\"https://spoonacular.com/recipeImages/\"+this.props.id+\"-240x150.jpg\";viewMeal=/*#__PURE__*/_jsx(Link,{to:\"/meal/\"+this.props.id,style:{color:\"rgb(41, 198, 254)\"},children:\" View Meal\"});mealTitle=this.props.title;}var search=/*#__PURE__*/_jsx(_Fragment,{});if(this.props.edit){search=/*#__PURE__*/_jsx(\"button\",{class:\"btn edit-meal-button\",title:\"Change Meal\",onClick:this.showModalClick});_changeMealFunc=this.props.changeMealFunc;}return/*#__PURE__*/_jsxs(\"div\",{class:\"card h-100\",style:{width:\"170px\",backgroundColor:\"#13161d\",color:\"whitesmoke\",marginBottom:\"2rem\"},onClick:this.props.mealClick,children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,class:\"card-img-top\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{class:\"card-title\",children:mealTitle}),viewMeal,search,/*#__PURE__*/_jsx(MealsModal,{show:this.state.showModal,closeFunc:function closeFunc(){return _this3.setState({showModal:false});},changeMealFunc:function changeMealFunc(id,title){return _changeMealFunc(id,title);}})]})]});}}]);return Meal;}(Component);export default Meal;","map":{"version":3,"sources":["C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/src/components/Meals/Meal.js"],"names":["React","Component","axios","emptysign","MealsModal","config","Link","Meal","props","showModalClick","setState","showModal","state","meal","title","id","storageCheck","JSON","parse","localStorage","getItem","options","method","url","headers","Date","now","ttl","request","then","res","data","setItem","stringify","catch","err","console","error","imageUrl","viewMeal","color","mealTitle","changeMealFunc","newMeal","search","edit","width","backgroundColor","marginBottom","mealClick"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from \"axios\";\r\nimport emptysign from \"../MealPlan/emptyplate.webp\"\r\nimport MealsModal from \"./MealsModal\";\r\nimport config from \"../../config.json\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Meal extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            showModal: false,\r\n            meal: {title: \"\"}\r\n        }\r\n    }\r\n        \r\n    \r\n\r\n    getInfo(){\r\n        if(this.props.id !== \"\"){\r\n            const storageCheck = JSON.parse(localStorage.getItem(this.props.id));\r\n            const options = {\r\n                method: 'GET',\r\n                url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/' + this.props.id + '/information',\r\n                headers: {\r\n                'X-RapidAPI-Host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\r\n                'X-RapidAPI-Key': config[\"api-key\"]\r\n                }\r\n            };\r\n            if(storageCheck && (Date.now() < storageCheck.ttl)){\r\n                \r\n                this.setState({meal: storageCheck})\r\n            }\r\n            else{\r\n            \r\n                axios.request(options).then(res => {\r\n                    res.data.ttl = Date.now() + (86400 * 1000);\r\n                    localStorage.setItem(this.props.id, JSON.stringify(res.data));\r\n                    this.setState({meal: res.data})\r\n                    \r\n                }).catch(err => {\r\n                    console.error(err)\r\n                })\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n    \r\n    showModalClick = () => {\r\n        this.setState({\r\n            showModal: true\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let imageUrl = emptysign\r\n        let viewMeal = <a href=\"#\" style={{color: \"rgb(41, 198, 254)\"}}> View Meal</a>\r\n        let mealTitle = \"No Meal\"\r\n        let changeMealFunc = (newMeal) => {}\r\n        if(this.props.id !== \"\"){\r\n            imageUrl = \"https://spoonacular.com/recipeImages/\" + this.props.id + \"-240x150.jpg\"\r\n            viewMeal = <Link to={\"/meal/\" + this.props.id} style={{color: \"rgb(41, 198, 254)\"}}> View Meal</Link>\r\n            mealTitle = this.props.title\r\n        \r\n        }\r\n        let search = <></>\r\n        if(this.props.edit){\r\n            search = <button class=\"btn edit-meal-button\" title=\"Change Meal\" onClick={this.showModalClick}></button>\r\n            changeMealFunc = this.props.changeMealFunc\r\n        }\r\n        return(\r\n            <div class=\"card h-100\" style={{width: \"170px\", backgroundColor: \"#13161d\", color: \"whitesmoke\", marginBottom: \"2rem\"}} onClick={this.props.mealClick}>\r\n                <img src={imageUrl} class=\"card-img-top\" alt=\"...\" />\r\n                <div class=\"card-body\" >\r\n                    <h6 class=\"card-title\">{mealTitle}</h6>\r\n                    {viewMeal}\r\n                    {search}\r\n                    <MealsModal show={this.state.showModal} closeFunc={() => this.setState({showModal: false})} changeMealFunc={(id, title) => changeMealFunc(id, title)}></MealsModal>\r\n                    \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Meal;\r\n"]},"metadata":{},"sourceType":"module"}