{"ast":null,"code":"import _classCallCheck from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import MealSnippet from\"./MealSnippet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TodaysMeal=/*#__PURE__*/function(_Component){_inherits(TodaysMeal,_Component);var _super=_createSuper(TodaysMeal);function TodaysMeal(props){var _this;_classCallCheck(this,TodaysMeal);_this=_super.call(this,props);_this.mealtimeClick=function(id){var newArray=_this.state.buttonStates;newArray[id]=\"rounded-focus\";for(var i=0;i<3;i++){if(i!==id){newArray[i]=\"rounded\";}}_this.setState({buttonStates:newArray});if(_this.state.activePlan){_this.setState({activeSnippet:id});_this.forceUpdate();}};_this.weekdayStringConvert=function(dayInt){switch(dayInt){case 0:return\"sunday\";case 1:return\"monday\";case 2:return\"tuesday\";case 3:return\"wednesday\";case 4:return\"thursday\";case 5:return\"friday\";case 6:return\"saturday\";}};_this.getMealPeriod=function(timeInt){if(0<=timeInt&&timeInt<11){return 0;}else if(11<=timeInt&&timeInt<17){return 1;}else{return 2;}};_this.state={buttonStates:[\"rounded\",\"rounded\",\"rounded\"],activePlan:{},todaysMeals:[],mealSnippets:[],activeSnippet:0};return _this;}_createClass(TodaysMeal,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var config={headers:{\"x-access-token\":localStorage.getItem(\"token\")}};axios.get('http://localhost:5000/user/getActive',config).then(function(activePlanRes){if(activePlanRes.data.isAuth===false){window.location=\"/login\";}if(activePlanRes.data.activePlanId){axios.get('http://localhost:5000/mealplan/'+activePlanRes.data.activePlanId,config).then(function(res){_this2.setState({activePlan:res.data});var current=new Date();var weekdayStr=_this2.weekdayStringConvert(current.getDay());_this2.setState({todaysMeals:res.data[weekdayStr]});var mealPeriod=_this2.getMealPeriod(current.getHours());_this2.setState({mealSnippets:[/*#__PURE__*/_jsx(MealSnippet,{id:res.data[weekdayStr][0]}),/*#__PURE__*/_jsx(MealSnippet,{id:res.data[weekdayStr][1]}),/*#__PURE__*/_jsx(MealSnippet,{id:res.data[weekdayStr][2]})],activeSnippet:mealPeriod});var buttonStatesCp=_this2.state.buttonStates;buttonStatesCp[mealPeriod]=\"rounded-focus\";_this2.setState({buttonStates:buttonStatesCp});});}else{_this2.setState({activePlan:null});_this2.setState({mealSnippets:[/*#__PURE__*/_jsx(\"h1\",{style:{padding:\"20px\"},children:\"Head to Meal Plans and click a Mealplans Checkbox to select an Active Meal Plan!\"})]});}});}},{key:\"render\",value:function render(){var _this3=this;var snippet=this.state.mealSnippets[this.state.activeSnippet];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{class:this.state.buttonStates[0],onClick:function onClick(){return _this3.mealtimeClick(0);},style:{top:'26vh',left:'9vw'},children:/*#__PURE__*/_jsx(\"span\",{class:\"rounded-text\",children:\"Breakfast\"})}),/*#__PURE__*/_jsx(\"button\",{class:this.state.buttonStates[1],onClick:function onClick(){return _this3.mealtimeClick(1);},style:{top:'36vh',left:'9vw'},children:/*#__PURE__*/_jsx(\"span\",{class:\"rounded-text\",children:\"Lunch\"})}),/*#__PURE__*/_jsx(\"button\",{class:this.state.buttonStates[2],onClick:function onClick(){return _this3.mealtimeClick(2);},style:{top:'46vh',left:'9vw'},children:/*#__PURE__*/_jsx(\"span\",{class:\"rounded-text\",children:\"Dinner\"})}),/*#__PURE__*/_jsx(\"div\",{type:\"container\",style:{position:\"absolute\",left:\"25vw\",top:\"26vh\",width:\"50vw\",backgroundColor:\"#13161d\",color:\"white\",fontFamily:\"Lexend\"},children:snippet})]});}}]);return TodaysMeal;}(Component);export default TodaysMeal;","map":{"version":3,"sources":["C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/src/components/App/TodaysMeal.js"],"names":["React","Component","axios","MealSnippet","TodaysMeal","props","mealtimeClick","id","newArray","state","buttonStates","i","setState","activePlan","activeSnippet","forceUpdate","weekdayStringConvert","dayInt","getMealPeriod","timeInt","todaysMeals","mealSnippets","config","headers","localStorage","getItem","get","then","activePlanRes","data","isAuth","window","location","activePlanId","res","current","Date","weekdayStr","getDay","mealPeriod","getHours","buttonStatesCp","padding","snippet","top","left","position","width","backgroundColor","color","fontFamily"],"mappings":"wtBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,C,gJAGMC,CAAAA,U,wGACF,oBAAYC,KAAZ,CAAkB,4CACd,uBAAMA,KAAN,EADc,MAWlBC,aAXkB,CAWF,SAACC,EAAD,CAAQ,CACpB,GAAIC,CAAAA,QAAQ,CAAG,MAAKC,KAAL,CAAWC,YAA1B,CACAF,QAAQ,CAACD,EAAD,CAAR,CAAe,eAAf,CACA,IAAI,GAAII,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,CAAnB,CAAsBA,CAAC,EAAvB,CAA0B,CACtB,GAAGA,CAAC,GAAKJ,EAAT,CAAY,CACRC,QAAQ,CAACG,CAAD,CAAR,CAAc,SAAd,CACH,CACJ,CACD,MAAKC,QAAL,CAAc,CAACF,YAAY,CAAEF,QAAf,CAAd,EACA,GAAG,MAAKC,KAAL,CAAWI,UAAd,CAAyB,CACrB,MAAKD,QAAL,CAAc,CAACE,aAAa,CAAEP,EAAhB,CAAd,EACA,MAAKQ,WAAL,GACH,CACJ,CAxBiB,OA0BlBC,oBA1BkB,CA0BK,SAACC,MAAD,CAAY,CAC/B,OAAQA,MAAR,EACI,IAAK,EAAL,CACE,MAAO,QAAP,CACF,IAAK,EAAL,CACE,MAAO,QAAP,CACF,IAAK,EAAL,CACG,MAAO,SAAP,CACH,IAAK,EAAL,CACE,MAAO,WAAP,CACF,IAAK,EAAL,CACE,MAAO,UAAP,CACF,IAAK,EAAL,CACE,MAAO,QAAP,CACF,IAAK,EAAL,CACE,MAAO,UAAP,CAdN,CAgBH,CA3CiB,OA6ClBC,aA7CkB,CA6CF,SAACC,OAAD,CAAa,CACzB,GAAG,GAAKA,OAAL,EAAgBA,OAAO,CAAG,EAA7B,CAAgC,CAC5B,MAAO,EAAP,CACH,CAFD,IAGK,IAAG,IAAMA,OAAN,EAAiBA,OAAO,CAAG,EAA9B,CAAiC,CAClC,MAAO,EAAP,CACH,CAFI,IAGD,CACA,MAAO,EAAP,CACH,CACJ,CAvDiB,CAEd,MAAKV,KAAL,CAAa,CACTC,YAAY,CAAE,CAAC,SAAD,CAAY,SAAZ,CAAuB,SAAvB,CADL,CAETG,UAAU,CAAE,EAFH,CAGTO,WAAW,CAAE,EAHJ,CAITC,YAAY,CAAE,EAJL,CAKTP,aAAa,CAAE,CALN,CAAb,CAFc,aASjB,C,wDAgDD,4BAAmB,iBACf,GAAMQ,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAC,CACR,iBAAkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADV,CADG,CAAf,CAKAvB,KAAK,CAACwB,GAAN,CAAU,sCAAV,CAAkDJ,MAAlD,EACCK,IADD,CACM,SAAAC,aAAa,CAAI,CACnB,GAAGA,aAAa,CAACC,IAAd,CAAmBC,MAAnB,GAA8B,KAAjC,CAAuC,CACnCC,MAAM,CAACC,QAAP,CAAkB,QAAlB,CACH,CACD,GAAGJ,aAAa,CAACC,IAAd,CAAmBI,YAAtB,CAAmC,CAC/B/B,KAAK,CAACwB,GAAN,CAAU,kCAAoCE,aAAa,CAACC,IAAd,CAAmBI,YAAjE,CAA+EX,MAA/E,EACCK,IADD,CACM,SAAAO,GAAG,CAAI,CACT,MAAI,CAACtB,QAAL,CAAc,CAACC,UAAU,CAAEqB,GAAG,CAACL,IAAjB,CAAd,EACA,GAAIM,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAd,CACA,GAAIC,CAAAA,UAAU,CAAG,MAAI,CAACrB,oBAAL,CAA0BmB,OAAO,CAACG,MAAR,EAA1B,CAAjB,CACA,MAAI,CAAC1B,QAAL,CAAc,CAACQ,WAAW,CAAEc,GAAG,CAACL,IAAJ,CAASQ,UAAT,CAAd,CAAd,EACA,GAAIE,CAAAA,UAAU,CAAG,MAAI,CAACrB,aAAL,CAAmBiB,OAAO,CAACK,QAAR,EAAnB,CAAjB,CACA,MAAI,CAAC5B,QAAL,CAAc,CAACS,YAAY,CAAE,cAAC,KAAC,WAAD,EAAa,EAAE,CAAEa,GAAG,CAACL,IAAJ,CAASQ,UAAT,EAAqB,CAArB,CAAjB,EAAD,cAA2D,KAAC,WAAD,EAAa,EAAE,CAAEH,GAAG,CAACL,IAAJ,CAASQ,UAAT,EAAqB,CAArB,CAAjB,EAA3D,cAC7B,KAAC,WAAD,EAAa,EAAE,CAAEH,GAAG,CAACL,IAAJ,CAASQ,UAAT,EAAqB,CAArB,CAAjB,EAD6B,CAAf,CAEdvB,aAAa,CAAEyB,UAFD,CAAd,EAGA,GAAIE,CAAAA,cAAc,CAAG,MAAI,CAAChC,KAAL,CAAWC,YAAhC,CACA+B,cAAc,CAACF,UAAD,CAAd,CAA6B,eAA7B,CACA,MAAI,CAAC3B,QAAL,CAAc,CAACF,YAAY,CAAE+B,cAAf,CAAd,EACH,CAbD,EAcH,CAfD,IAgBI,CACA,MAAI,CAAC7B,QAAL,CAAc,CAACC,UAAU,CAAE,IAAb,CAAd,EACA,MAAI,CAACD,QAAL,CAAc,CAACS,YAAY,CAAE,cAAC,WAAI,KAAK,CAAE,CAACqB,OAAO,CAAE,MAAV,CAAX,8FAAD,CAAf,CAAd,EACH,CAEJ,CA1BD,EA8BH,C,sBAGD,iBAAQ,iBACJ,GAAIC,CAAAA,OAAO,CAAG,KAAKlC,KAAL,CAAWY,YAAX,CAAwB,KAAKZ,KAAL,CAAWK,aAAnC,CAAd,CACA,mBACA,wCACI,eAAQ,KAAK,CAAE,KAAKL,KAAL,CAAWC,YAAX,CAAwB,CAAxB,CAAf,CAA2C,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACJ,aAAL,CAAmB,CAAnB,CAAN,EAApD,CAAiF,KAAK,CAAE,CAACsC,GAAG,CAAE,MAAN,CAAcC,IAAI,CAAE,KAApB,CAAxF,uBAAoH,aAAM,KAAK,CAAC,cAAZ,uBAApH,EADJ,cAEI,eAAQ,KAAK,CAAE,KAAKpC,KAAL,CAAWC,YAAX,CAAwB,CAAxB,CAAf,CAA2C,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACJ,aAAL,CAAmB,CAAnB,CAAN,EAApD,CAAiF,KAAK,CAAE,CAACsC,GAAG,CAAE,MAAN,CAAcC,IAAI,CAAE,KAApB,CAAxF,uBAAoH,aAAM,KAAK,CAAC,cAAZ,mBAApH,EAFJ,cAGI,eAAQ,KAAK,CAAE,KAAKpC,KAAL,CAAWC,YAAX,CAAwB,CAAxB,CAAf,CAA2C,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACJ,aAAL,CAAmB,CAAnB,CAAN,EAApD,CAAiF,KAAK,CAAE,CAACsC,GAAG,CAAE,MAAN,CAAcC,IAAI,CAAE,KAApB,CAAxF,uBAAoH,aAAM,KAAK,CAAC,cAAZ,oBAApH,EAHJ,cAII,YAAK,IAAI,CAAC,WAAV,CAAsB,KAAK,CAAE,CAACC,QAAQ,CAAE,UAAX,CAAuBD,IAAI,CAAE,MAA7B,CAAqCD,GAAG,CAAE,MAA1C,CAAkDG,KAAK,CAAE,MAAzD,CAAiEC,eAAe,CAAE,SAAlF,CAA6FC,KAAK,CAAE,OAApG,CAA6GC,UAAU,CAAE,QAAzH,CAA7B,UACKP,OADL,EAJJ,GADA,CAaH,C,wBAhHoB1C,S,EAmHzB,cAAeG,CAAAA,UAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport MealSnippet from \"./MealSnippet\"\r\n\r\n\r\nclass TodaysMeal extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            buttonStates: [\"rounded\", \"rounded\", \"rounded\"],\r\n            activePlan: {},\r\n            todaysMeals: [],\r\n            mealSnippets: [],\r\n            activeSnippet: 0\r\n        }\r\n    }\r\n\r\n    mealtimeClick = (id) => {\r\n        let newArray = this.state.buttonStates;\r\n        newArray[id] = \"rounded-focus\"\r\n        for(let i = 0; i < 3; i++){\r\n            if(i !== id){\r\n                newArray[i] = \"rounded\"\r\n            }\r\n        } \r\n        this.setState({buttonStates: newArray})\r\n        if(this.state.activePlan){\r\n            this.setState({activeSnippet: id})\r\n            this.forceUpdate()\r\n        }\r\n    }\r\n\r\n    weekdayStringConvert = (dayInt) => {\r\n        switch (dayInt) {\r\n            case 0:\r\n              return \"sunday\";\r\n            case 1:\r\n              return \"monday\";\r\n            case 2:\r\n               return \"tuesday\";\r\n            case 3:\r\n              return \"wednesday\";\r\n            case 4:\r\n              return \"thursday\";\r\n            case 5:\r\n              return \"friday\";\r\n            case 6:\r\n              return \"saturday\";\r\n        }\r\n    }\r\n\r\n    getMealPeriod = (timeInt) => {\r\n        if(0 <= timeInt && timeInt < 11){\r\n            return 0;\r\n        }\r\n        else if(11 <= timeInt && timeInt < 17){\r\n            return 1;\r\n        }\r\n        else{\r\n            return 2;\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const config = {\r\n            headers:{\r\n            \"x-access-token\": localStorage.getItem(\"token\")\r\n            }\r\n        }\r\n        axios.get('http://localhost:5000/user/getActive', config)\r\n        .then(activePlanRes => {\r\n            if(activePlanRes.data.isAuth === false){\r\n                window.location = \"/login\"; \r\n            }\r\n            if(activePlanRes.data.activePlanId){\r\n                axios.get('http://localhost:5000/mealplan/' + activePlanRes.data.activePlanId, config)\r\n                .then(res => {\r\n                    this.setState({activePlan: res.data})\r\n                    let current = new Date();\r\n                    let weekdayStr = this.weekdayStringConvert(current.getDay());\r\n                    this.setState({todaysMeals: res.data[weekdayStr]});\r\n                    let mealPeriod = this.getMealPeriod(current.getHours());\r\n                    this.setState({mealSnippets: [<MealSnippet id={res.data[weekdayStr][0]}></MealSnippet>, <MealSnippet id={res.data[weekdayStr][1]}></MealSnippet>, \r\n                    <MealSnippet id={res.data[weekdayStr][2]}></MealSnippet>],\r\n                    activeSnippet: mealPeriod})\r\n                    let buttonStatesCp = this.state.buttonStates\r\n                    buttonStatesCp[mealPeriod] = \"rounded-focus\"\r\n                    this.setState({buttonStates: buttonStatesCp})         \r\n                })\r\n            }\r\n            else{\r\n                this.setState({activePlan: null})\r\n                this.setState({mealSnippets: [<h1 style={{padding: \"20px\"}}>Head to Meal Plans and click a Mealplans Checkbox to select an Active Meal Plan!</h1>]})\r\n            }\r\n            \r\n        })\r\n        \r\n\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        let snippet = this.state.mealSnippets[this.state.activeSnippet]\r\n        return (\r\n        <>\r\n            <button class={this.state.buttonStates[0]} onClick={() => this.mealtimeClick(0)} style={{top: '26vh', left: '9vw'}}><span class=\"rounded-text\">Breakfast</span></button>\r\n            <button class={this.state.buttonStates[1]} onClick={() => this.mealtimeClick(1)} style={{top: '36vh', left: '9vw'}}><span class=\"rounded-text\">Lunch</span></button>\r\n            <button class={this.state.buttonStates[2]} onClick={() => this.mealtimeClick(2)} style={{top: '46vh', left: '9vw'}}><span class=\"rounded-text\">Dinner</span></button>\r\n            <div type=\"container\" style={{position: \"absolute\", left: \"25vw\", top: \"26vh\", width: \"50vw\", backgroundColor: \"#13161d\", color: \"white\", fontFamily: \"Lexend\"}}>\r\n                {snippet}\r\n            </div>\r\n            \r\n\r\n            \r\n        </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TodaysMeal;"]},"metadata":{},"sourceType":"module"}