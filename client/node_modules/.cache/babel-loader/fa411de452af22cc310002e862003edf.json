{"ast":null,"code":"import _classCallCheck from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import config from\"../../config.json\";import axios from'axios';import{Accordion}from'react-bootstrap';import\"bootstrap/dist/css/bootstrap.min.css\";import Navbar from\"../Navbar/Navbar.js\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MealInfo=/*#__PURE__*/function(_Component){_inherits(MealInfo,_Component);var _super=_createSuper(MealInfo);function MealInfo(props){var _this;_classCallCheck(this,MealInfo);_this=_super.call(this,props);_this.state={meal:{},images:/*#__PURE__*/_jsx(_Fragment,{}),steps:/*#__PURE__*/_jsx(_Fragment,{})};return _this;}_createClass(MealInfo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.match.params.id;var storageCheck=JSON.parse(localStorage.getItem(id));var options={method:'GET',url:'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/'+id+'/information',headers:{'X-RapidAPI-Host':'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com','X-RapidAPI-Key':config[\"api-key\"]}};if(storageCheck&&Date.now()<storageCheck.ttl){this.setState({meal:storageCheck});var imageList=/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:storageCheck.extendedIngredients.map(function(ingredient){return/*#__PURE__*/_jsxs(\"div\",{class:\"col-6\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"ingredient\",style:{width:\"50px\",height:\"50x\"},src:\"https://spoonacular.com/cdn/ingredients_100x100/\"+ingredient.image}),/*#__PURE__*/_jsx(\"h6\",{children:ingredient.original})]});})});var instructions=/*#__PURE__*/_jsx(_Fragment,{});if(storageCheck.analyzedInstructions.length>0){instructions=/*#__PURE__*/_jsx(\"ol\",{children:storageCheck.analyzedInstructions[0].steps.map(function(stepJSON){return/*#__PURE__*/_jsx(\"li\",{\"list-style-type\":\"circle\",children:stepJSON.step});})});}this.setState({meal:storageCheck,images:imageList,steps:instructions});}else{axios.request(options).then(function(res){res.data.ttl=Date.now()+86400*1000;localStorage.setItem(id,JSON.stringify(res.data));var imageList=/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:res.data.extendedIngredients.map(function(ingredient){return/*#__PURE__*/_jsxs(\"div\",{class:\"col-6\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"ingredient\",style:{width:\"50px\",height:\"50x\"},src:\"https://spoonacular.com/cdn/ingredients_100x100/\"+ingredient.image}),/*#__PURE__*/_jsx(\"h6\",{children:ingredient.original})]});})});var instructions=/*#__PURE__*/_jsx(_Fragment,{});if(res.data.analyzedInstructions.length>0){instructions=/*#__PURE__*/_jsx(\"ol\",{children:res.data.analyzedInstructions[0].steps.map(function(stepJSON){return/*#__PURE__*/_jsx(\"li\",{\"list-style-type\":\"circle\",children:stepJSON.step});})});}_this2.setState({meal:res.data,images:imageList,steps:instructions});}).catch(function(err){console.error(err);});}}},{key:\"render\",value:function render(){var id=this.props.match.params.id;var meal=this.state.meal;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{class:\"clearfix\",style:{backgroundColor:'rgba(255, 255, 255, 0.7)',fontFamily:\"Lexend\"},children:[/*#__PURE__*/_jsx(\"img\",{alt:\"meal\",style:{width:\"556px\",height:\"370px\"},src:\"https://spoonacular.com/recipeImages/\"+id+\"-556x370.jpg\",align:\"left\",class:\"col-md-8 float mb-3 mt-2 me-5 ms-md-3\"}),/*#__PURE__*/_jsx(\"h1\",{style:{fontFamily:\"Lexend\"},children:meal.title}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"20px\"},dangerouslySetInnerHTML:{__html:meal.summary}})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'rgba(255, 255, 255, 0.7)',fontFamily:\"Lexend\",width:\"100%\"},children:/*#__PURE__*/_jsxs(Accordion,{defaultActiveKey:\"0\",style:{width:\"70vw\",marginLeft:\"1vw\"},alwaysOpen:true,children:[/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"0\",children:[/*#__PURE__*/_jsx(Accordion.Header,{children:\"Ingredients\"}),/*#__PURE__*/_jsx(Accordion.Body,{children:this.state.images})]}),/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"1\",children:[/*#__PURE__*/_jsx(Accordion.Header,{children:\"Steps\"}),/*#__PURE__*/_jsx(Accordion.Body,{children:this.state.steps})]})]})})]});}}]);return MealInfo;}(Component);export default MealInfo;","map":{"version":3,"sources":["C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/src/components/Meals/MealInfo.js"],"names":["React","Component","config","axios","Accordion","Navbar","MealInfo","props","state","meal","images","steps","id","match","params","storageCheck","JSON","parse","localStorage","getItem","options","method","url","headers","Date","now","ttl","setState","imageList","extendedIngredients","map","ingredient","width","height","image","original","instructions","analyzedInstructions","length","stepJSON","step","request","then","res","data","setItem","stringify","catch","err","console","error","backgroundColor","fontFamily","title","fontSize","__html","summary","marginLeft"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport config from \"../../config.json\";\r\nimport axios from 'axios';\r\nimport { Accordion } from 'react-bootstrap';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"../Navbar/Navbar.js\"\r\n\r\n\r\nclass MealInfo extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            meal: {},\r\n            images: <></>,\r\n            steps: <></>\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const id = this.props.match.params.id\r\n        const storageCheck = JSON.parse(localStorage.getItem(id));\r\n        const options = {\r\n            method: 'GET',\r\n            url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/' + id + '/information',\r\n            headers: {\r\n            'X-RapidAPI-Host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\r\n            'X-RapidAPI-Key': config[\"api-key\"]\r\n            }\r\n        };\r\n        if(storageCheck && (Date.now() < storageCheck.ttl)){\r\n            this.setState({meal: storageCheck})\r\n            const imageList = <div class=\"row\">\r\n                    {storageCheck.extendedIngredients.map((ingredient) => <div class=\"col-6\"><img alt=\"ingredient\"\r\n                style={{width: \"50px\", height: \"50x\"}} src={\"https://spoonacular.com/cdn/ingredients_100x100/\" + ingredient.image}></img><h6>{ingredient.original}</h6></div>)}\r\n                </div>;\r\n            let instructions = <></>;\r\n            if(storageCheck.analyzedInstructions.length > 0){\r\n                instructions = <ol>\r\n                    {storageCheck.analyzedInstructions[0].steps.map((stepJSON) => <li list-style-type=\"circle\">{stepJSON.step}</li>)}\r\n                    </ol>\r\n            }\r\n            \r\n            this.setState({meal: storageCheck, \r\n                    images: imageList,\r\n                steps: instructions})         \r\n        }\r\n        else{\r\n            axios.request(options).then(res => {\r\n                res.data.ttl = Date.now() + (86400 * 1000);\r\n                localStorage.setItem(id, JSON.stringify(res.data));\r\n                const imageList = <div class=\"row\">\r\n                    {res.data.extendedIngredients.map((ingredient) => <div class=\"col-6\"><img alt=\"ingredient\"\r\n                style={{width: \"50px\", height: \"50x\"}} src={\"https://spoonacular.com/cdn/ingredients_100x100/\" + ingredient.image}></img><h6>{ingredient.original}</h6></div>)}\r\n                </div>\r\n                let instructions = <></>;\r\n                if(res.data.analyzedInstructions.length > 0){\r\n                    instructions = <ol>\r\n                        {res.data.analyzedInstructions[0].steps.map((stepJSON) => <li list-style-type=\"circle\">{stepJSON.step}</li>)}\r\n                        </ol>\r\n                }\r\n                \r\n                this.setState({meal: res.data, \r\n                        images: imageList,\r\n                    steps: instructions})            \r\n            }).catch(err => {\r\n                console.error(err)\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const id = this.props.match.params.id\r\n        let meal = this.state.meal\r\n        return(\r\n            <>\r\n            <Navbar></Navbar>\r\n            <div class=\"clearfix\" style={{backgroundColor: 'rgba(255, 255, 255, 0.7)', fontFamily: \"Lexend\"}}>\r\n                <img alt=\"meal\" style={{width: \"556px\", height: \"370px\"}} src={\"https://spoonacular.com/recipeImages/\" + id + \"-556x370.jpg\"} align=\"left\" class=\"col-md-8 float mb-3 mt-2 me-5 ms-md-3\"></img>\r\n                <h1 style={{fontFamily: \"Lexend\"}}>{meal.title}</h1>\r\n                <p style={{fontSize: \"20px\"}} dangerouslySetInnerHTML={{__html: meal.summary}}></p>\r\n                \r\n\r\n            </div>\r\n            <div style={{backgroundColor: 'rgba(255, 255, 255, 0.7)', fontFamily: \"Lexend\", width: \"100%\"}}>\r\n                \r\n                    <Accordion defaultActiveKey=\"0\" style={{width: \"70vw\", marginLeft: \"1vw\"}} alwaysOpen>\r\n                        <Accordion.Item eventKey=\"0\">\r\n                            <Accordion.Header>\r\n                                    Ingredients\r\n                            </Accordion.Header>\r\n                            <Accordion.Body>\r\n                                {this.state.images}\r\n                            </Accordion.Body>\r\n                        </Accordion.Item>\r\n                        <Accordion.Item eventKey=\"1\">\r\n                            <Accordion.Header>\r\n                                    Steps\r\n                            </Accordion.Header>\r\n                            <Accordion.Body>\r\n                                {this.state.steps}\r\n                            </Accordion.Body>\r\n                        </Accordion.Item>\r\n                        \r\n                        \r\n                    </Accordion>\r\n                \r\n            </div>\r\n            \r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MealInfo;"]},"metadata":{},"sourceType":"module"}