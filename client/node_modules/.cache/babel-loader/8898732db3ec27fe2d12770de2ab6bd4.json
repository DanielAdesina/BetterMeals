{"ast":null,"code":"import _classCallCheck from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import\"bootstrap/dist/css/bootstrap.min.css\";import axios from\"axios\";import Meal from'./Meal';import{Modal}from'react-bootstrap';import config from\"../../config.json\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MealsModal=/*#__PURE__*/function(_Component){_inherits(MealsModal,_Component);var _super=_createSuper(MealsModal);function MealsModal(props){var _this;_classCallCheck(this,MealsModal);_this=_super.call(this,props);_this.state={searchField:\"\",mealsResult:/*#__PURE__*/_jsx(_Fragment,{})};return _this;}_createClass(MealsModal,[{key:\"handleClick\",value:function handleClick(event){var _this2=this;event.preventDefault();var options={method:'GET',url:'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/search',params:{query:this.state.searchField,number:'10',offset:'0'},headers:{'X-RapidAPI-Host':'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com','X-RapidAPI-Key':config['api-key']}};var storageCheck=JSON.parse(localStorage.getItem(this.state.searchField));if(storageCheck&&Date.now()<storageCheck.ttl){var mealArray=Array.from(storageCheck.results);this.setState({mealsResult:/*#__PURE__*/_jsx(\"div\",{class:\"row row-cols-3\",children:mealArray.map(function(meal){return/*#__PURE__*/_jsx(\"div\",{class:\"col\",style:{marginBottom:\"2rem\",height:\"250px\"},onClick:function onClick(){_this2.props.changeMealFunc(meal.id,meal.title);_this2.props.closeFunc();},children:/*#__PURE__*/_jsx(Meal,{id:meal.id,title:meal.title})});})})});}else{axios.request(options).then(function(response){response.data.ttl=Date.now()+86400*1000;localStorage.setItem(_this2.state.searchField,JSON.stringify(response.data));var mealArray=Array.from(response.data.results);_this2.setState({mealsResult:/*#__PURE__*/_jsx(\"div\",{class:\"row row-cols-3\",children:mealArray.map(function(meal){return/*#__PURE__*/_jsx(\"div\",{class:\"col\",style:{marginBottom:\"2rem\",height:\"250px\"},onClick:function onClick(){_this2.props.changeMealFunc(meal.id,meal.title);_this2.props.closeFunc();},children:/*#__PURE__*/_jsx(Meal,{id:meal.id,title:meal.title})});})})});}).catch(function(error){console.error(error);});}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(Modal,{show:this.props.show,size:\"lg\",scrollable:true,children:[/*#__PURE__*/_jsx(Modal.Header,{children:\"Meal Search\"}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"form\",{id:\"mealsearch-form\",style:{left:'0vw',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-outline mb-4 input-group inner-addon right-addon\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"mealsearch\",style:{left:'0vw',width:'100%'},placeholder:\"Search for any meal!\",value:this.state.searchField,onChange:function onChange(event){_this3.setState({searchField:event.target.value});}})}),/*#__PURE__*/_jsx(\"span\",{class:\"input-group-btn\",children:/*#__PURE__*/_jsx(\"button\",{class:\"search-icon\",type:\"submit\",onClick:function onClick(event){return _this3.handleClick(event);}})})]}),this.state.mealsResult]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){_this3.setState({mealsResult:/*#__PURE__*/_jsx(_Fragment,{}),searchField:\"\"});_this3.props.closeFunc();},children:\"Close\"})})]});}}]);return MealsModal;}(Component);export default MealsModal;","map":{"version":3,"sources":["C:/Users/danie/Documents/computerscience/BetterMeals/backend/client/src/components/Meals/MealsModal.js"],"names":["React","Component","axios","Meal","Modal","config","MealsModal","props","state","searchField","mealsResult","event","preventDefault","options","method","url","params","query","number","offset","headers","storageCheck","JSON","parse","localStorage","getItem","Date","now","ttl","mealArray","Array","from","results","setState","map","meal","marginBottom","height","changeMealFunc","id","title","closeFunc","request","then","response","data","setItem","stringify","catch","error","console","show","left","width","target","value","handleClick"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from \"axios\";\r\nimport Meal from './Meal';\r\nimport { Modal } from 'react-bootstrap';\r\nimport config from \"../../config.json\";\r\n\r\n\r\n\r\nclass MealsModal extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            searchField: \"\",\r\n            mealsResult: <></>\r\n        }\r\n    }\r\n    \r\n\r\n    handleClick(event){\r\n        event.preventDefault();\r\n        const options = {\r\n            method: 'GET',\r\n            url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/recipes/search',\r\n            params: {query: this.state.searchField, number: '10', offset: '0'},\r\n            headers: {\r\n              'X-RapidAPI-Host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\r\n              'X-RapidAPI-Key': config['api-key']\r\n            }\r\n        };\r\n        const storageCheck = JSON.parse(localStorage.getItem(this.state.searchField));\r\n        if(storageCheck && (Date.now() < storageCheck.ttl)){\r\n            const mealArray = Array.from(storageCheck.results);\r\n            this.setState({\r\n                mealsResult: <div class=\"row row-cols-3\">\r\n                    {mealArray.map((meal) =>\r\n                    <div class=\"col\" style={{marginBottom: \"2rem\", height: \"250px\"}} onClick={() => {this.props.changeMealFunc(meal.id, meal.title); this.props.closeFunc()}}>\r\n                        <Meal id={meal.id} title={meal.title}></Meal>\r\n                    </div>)}\r\n                </div>\r\n            })\r\n        }\r\n        else{\r\n            axios.request(options).then(response => {\r\n                response.data.ttl = Date.now() + (86400 * 1000);\r\n                localStorage.setItem(this.state.searchField, JSON.stringify(response.data));\r\n                const mealArray = Array.from(response.data.results);\r\n                this.setState({\r\n                    mealsResult: <div class=\"row row-cols-3\">\r\n                        {mealArray.map((meal) =>\r\n                         <div class=\"col\" style={{marginBottom: \"2rem\", height: \"250px\"}} onClick={() => {this.props.changeMealFunc(meal.id, meal.title); this.props.closeFunc()}}>\r\n                             <Meal id={meal.id} title={meal.title}></Meal>\r\n                         </div>)}\r\n                    </div>\r\n                })\r\n            }).catch(function (error) {\r\n                console.error(error);\r\n            });\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n           <Modal show={this.props.show} size=\"lg\" scrollable={true}>\r\n                <Modal.Header>Meal Search</Modal.Header>\r\n                <Modal.Body>\r\n                    <form id=\"mealsearch-form\" style={{left: '0vw', width: '100%'}}>\r\n                        \r\n                        <div class=\"form-outline mb-4 input-group inner-addon right-addon\">\r\n                            \r\n                            <input type=\"text\"  id=\"mealsearch\" style={{left: '0vw', width: '100%'}} placeholder='Search for any meal!' \r\n                            value={this.state.searchField} onChange={event => {this.setState({searchField: event.target.value})}}/>\r\n                            \r\n                            \r\n                            {/* <span class=\"input-group-btn\">\r\n                                <button class=\"btn btn-primary\" type=\"button\"></button>\r\n                            </span> */}\r\n                            \r\n                        </div>\r\n                        <span class=\"input-group-btn\">\r\n                            <button class=\"search-icon\" type=\"submit\" onClick={event => this.handleClick(event)}></button>\r\n                        </span>\r\n                    </form>\r\n                    {this.state.mealsResult}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <button onClick={() => {this.setState({mealsResult: <></>, searchField: \"\"}); this.props.closeFunc()}}>Close</button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default MealsModal"]},"metadata":{},"sourceType":"module"}